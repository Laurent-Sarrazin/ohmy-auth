<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="msvalidate.01" content="53B2DD45C177FE70E478EAF67B9B5695" />
    <meta name="description" content="OAuth made easy for PHP">
    <meta name="keywords" content="OAuth,oauth,oauth1,oauth2,OAuth1a,OAuth2,OAuth1.0a,OAuth2.0,php">
    <meta name="author" content="Daniel Park">
    <title>ohmy-auth by sudocode</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>ohmy-auth</h1>
        <p>OAuth made easy for PHP</p>

        <p class="view"><a href="https://github.com/sudocode/ohmy-auth">View the Project on GitHub <small>sudocode/ohmy-auth</small></a></p>


        <ul>
          <li><a href="https://github.com/sudocode/ohmy-auth/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sudocode/ohmy-auth/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sudocode/ohmy-auth">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a name="intro" class="anchor" href="#intro"><span class="octicon octicon-link"></span></a>Intro</h3>

<p>ohmy-auth (Oma) is a PHP library that reduces OAuth to its most basic form. This is <strong><em>the</em></strong> library for developers who don't want to outsource their OAuth logic to a web-service or rely on a library adapter.</p>

<p>Let's start with a basic example..</p>

<div class="highlight highlight-php"><pre><span class="c1"># use your preferred autoloader</span>
<span class="k">use</span> <span class="nx">ohmy\Auth1</span><span class="p">;</span>
<span class="nx">Auth1</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">,</span> <span class="s1">'secret'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/request_token.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">access</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/access_token.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">GET</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/echo_api.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">then</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
           <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
      <span class="p">});</span>
</pre></div>

<p>In just 11 lines, the above code performed a 2-legged OAuth 1.0a exchange with <a href="http://term.ie/oauth/example/">term.ie</a>, made an API request to echo_api.php, and then dumped the results. </p>

<p>Oma uses a pseudo-<a href="http://en.wikipedia.org/wiki/Futures_and_promises">promise pattern</a>, which is how the functions are chained to each other. Once <code>request()</code>, <code>authorize()</code>, or <code>access()</code> is called, Oma will proceed to the next stage of the OAuth flow, preventing someone from inadvertently performing a leg more than once.   </p>

<p><code>then()</code>, <code>catch()</code>, and <code>finally()</code> are standard promise functions that can be inserted at any time of the flow. This is useful if you want to step in and take control of things without interrupting the entire flow.</p>

<p>For example, what if you wanted to save the access token to a database? Easy, just throw a <code>then()</code> after the <code>access()</code> call:</p>

<div class="highlight highlight-php"><pre><span class="c1"># use your preferred autoloader</span>
<span class="k">use</span> <span class="nx">ohmy\Auth1</span><span class="p">;</span>
<span class="nx">Auth1</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">,</span> <span class="s1">'secret'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/request_token.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">access</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/access_token.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">then</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="k">use</span><span class="p">(</span><span class="nv">$user</span><span class="p">){</span>
         <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="s1">'access_token'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'access_token'</span><span class="p">]);</span>
         <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
     <span class="p">})</span>
     <span class="o">-&gt;</span><span class="na">GET</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/echo_api.php'</span><span class="p">)</span>
     <span class="o">-&gt;</span><span class="na">then</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
           <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
      <span class="p">});</span>
</pre></div>

<p>Be careful, however. As promises go, <code>then()</code> calls are expected to return data to pass on to the next step. </p>

<p>What if you wanted to make multiple API calls at arbitrary points in your code? Oma makes it easy to break up the flow into different sections:</p>

<div class="highlight highlight-php"><pre><span class="c1"># use your preferred autoloader</span>
<span class="k">use</span> <span class="nx">ohmy\Auth1</span><span class="p">;</span>
<span class="nv">$termie</span> <span class="o">=</span> <span class="nx">Auth1</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
               <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">)</span>
               <span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">,</span> <span class="s1">'secret'</span><span class="p">)</span>
               <span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/request_token.php'</span><span class="p">)</span>
               <span class="o">-&gt;</span><span class="na">access</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/access_token.php'</span><span class="p">);</span>

<span class="nv">$termie</span><span class="o">-&gt;</span><span class="na">GET</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/echo_api.php?foo=bar'</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">then</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
             <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="p">});</span>

<span class="c1"># sometime later</span>
<span class="nv">$termie</span><span class="o">-&gt;</span><span class="na">POST</span><span class="p">(</span><span class="s1">'http://term.ie/oauth/example/echo_api.php?bar=baz'</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">then</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
             <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="p">});</span>
</pre></div>

<p>This is just a small sample of what Oma is capable of. For 3-legged OAuth1.0a/2.0 examples, head over to the <a href="https://github.com/sudocode/ohmy-auth/tree/master/examples">examples</a>.</p>

<h3>
<a name="installing" class="anchor" href="#installing"><span class="octicon octicon-link"></span></a>Installing</h3>

<p>OAuth only needs PHP 5.3 and Curl, so you should be able to drop it into any setup you have. If you'd like to use composer, you can just add the following entry to your <code>composer.json</code>:</p>

<pre><code>"ohmy/auth": "*"
</code></pre>

<h3>
<a name="author-and-licensing" class="anchor" href="#author-and-licensing"><span class="octicon octicon-link"></span></a>Author and Licensing</h3>

<p>ohmy-auth was developed by Daniel Park (<a href="https://twitter.com/sudocoder">@sudocoder</a>), a Platforms developer at Yahoo. ohmy-auth has been approved for open-source under the New BSD license.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/sudocode">sudocode</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47694586-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
